/**
 *	jQuery continuousCssAnime.
 *	jQuery required.
 *	
 *	* Copyright 2014 (c) kamem
 *	* http://develo.org/
 *	* Licensed Under the MIT.
 *	
 *	Date: 2014.01.26
 */
!function(a){a.fn.continuousCssAnime=function(b){function c(b,c){if($content=a(b.target),!n[c].propertyName)if("transition"==h&&(n[c].propertyName=b.propertyName,setTimeout(function(){n[c].propertyName=0},0)),m?n[c].classNum--:n[c].classNum++,n[c].classNum>0&&n[c].classNum<=n[c].num){if(m?$content.removeClass(e+(n[c].classNum+1)):$content.addClass(e+n[c].classNum),"animation"==h){var d=-1!=k.indexOf("webkit")?$content.css("-webkit-animation-delay"):-1!=k.indexOf("gecko")?$content.css("-moz-animation-delay"):-1!=k.indexOf("opera")?$content.css("-o-animation-delay"):-1!=k.indexOf("MSIE 10.0")?$content.css("-ms-animation-delay"):"",f=1e3*d.substring(0,d.length-1);f>0&&($content.addClass("end"+(n[c].classNum-1)),setTimeout(function(){$content.removeClass("end"+(n[c].classNum-1))},f))}n[c].onCompArray[n[c].classNum-1]&&n[c].onCompArray[n[c].classNum-1]()}else n[c].classNum=1,"animation"==h&&($content[0].className=n[c].className),m?(m=!1,$content.removeClass(e+1),o.remove(c)):(m=!1,$content.addClass(e+"allend")),g&&g()}$content=this;var d=a.extend({type:"transition",num:1,name:"move",onComplate:"",event:!1,btnContent:$content,animeReverse:!1},b),e=d.name,f=d.num,g=d.onComplate,h=d.type,i=d.event,j=d.btnContent,k=navigator.userAgent.toLowerCase(),l=-1!=k.indexOf("webkit")?"transition"==h?"webkitTransitionEnd":"webkitAnimationEnd":-1!=k.indexOf("gecko")?"transition"==h?"transitionend":"animationend":-1!=k.indexOf("opera")?"transition"==h?"oTransitionEnd":"oAnimationend":-1!=k.indexOf("MSIE 10.0")?"transition"==h?"MSTransitionEnd":"MSAnimationend":"",m=!1,n={},o={add:function(a){n[a].callee?$content.eq(a)[0].addEventListener(l,n[a].callee,!1):$content.eq(a)[0].addEventListener(l,function(b){n[a].callee=arguments.callee,c(b,a)},!1)},remove:function(a){$content.eq(a)[0].removeEventListener(l,n[a].callee,!1)}};$content.each(function(b){n[b]={},n[b].className=a(this)[0].className,n[b].classNum=1;var c="animeNum",g=a(this)[0].className.indexOf(c)+c.length;n[b].num=0<=a(this)[0].className.indexOf(c)?a(this)[0].className.substring(g,g+1):f,console.log(a(this)[0].className.indexOf(c)),n[b].onCompArray=[];for(var k=1;k<=n[b].num;k++)d["anime"+k+"onComplate"]&&(n[b].onCompArray[k]=d["anime"+k+"onComplate"]);i?j[i](function(){"animation"==h?($content.eq(b)[0].className==n[b].className||0<$content.eq(b)[0].className.indexOf(e+"allend"))&&($content.eq(b).removeClass(e+"allend"),$content.eq(b).addClass(e+n[b].classNum),o.add(b)):(m=!1,$content.eq(b).removeClass(e+"allend"),$content.eq(b).addClass(e+n[b].classNum),o.add(b))},function(){"animation"==h&&"hover"==i?0<$content.eq(b)[0].className.indexOf(e+"allend")&&o.remove(b):d.animeReverse&&"transition"==h?(m=!0,0<$content.eq(b)[0].className.indexOf(e+"allend")&&(n[b].classNum=n[b].num-1,$content.eq(b).removeClass(e+"allend"),$content.eq(b).removeClass(e+n[b].num))):(n[b].classNum=1,$content.eq(b)[0].className=n[b].className,o.remove(b))}):(a(this).addClass(e+n[b].classNum),o.add(b))})}}(jQuery);